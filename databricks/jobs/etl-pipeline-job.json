{
  "name": "Neo4j ETL Pipeline",
  "email_notifications": {
    "on_start": [],
    "on_success": [],
    "on_failure": ["pipeline-alerts@example.com"]
  },
  "timeout_seconds": 3600,
  "max_concurrent_runs": 1,
  "tasks": [
    {
      "task_key": "csv_ingestion",
      "description": "Ingest CSV data from storage",
      "notebook_task": {
        "notebook_path": "/Shared/neo4j-pipeline/csv-ingestion"
      },
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "Standard_DS3_v2",
        "num_workers": 2,
        "spark_conf": {
          "spark.databricks.delta.preview.enabled": "true"
        }
      },
      "timeout_seconds": 1200
    },
    {
      "task_key": "data_validation",
      "description": "Validate data quality",
      "depends_on": [
        {
          "task_key": "csv_ingestion"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Shared/neo4j-pipeline/data-validation"
      },
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "Standard_DS3_v2",
        "num_workers": 2
      },
      "timeout_seconds": 1200
    },
    {
      "task_key": "graph_transformation",
      "description": "Transform data to graph format",
      "depends_on": [
        {
          "task_key": "data_validation"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Shared/neo4j-pipeline/graph-transformation"
      },
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "Standard_DS3_v2",
        "num_workers": 2
      },
      "timeout_seconds": 1200
    },
    {
      "task_key": "neo4j_loading",
      "description": "Load data to Neo4j Aura",
      "depends_on": [
        {
          "task_key": "graph_transformation"
        }
      ],
      "notebook_task": {
        "notebook_path": "/Shared/neo4j-pipeline/neo4j-loading",
        "base_parameters": {
          "batch_size": "1000"
        }
      },
      "new_cluster": {
        "spark_version": "13.3.x-scala2.12",
        "node_type_id": "Standard_DS3_v2",
        "num_workers": 2,
        "spark_conf": {
          "spark.databricks.delta.preview.enabled": "true"
        }
      },
      "timeout_seconds": 1800
    }
  ]
}
