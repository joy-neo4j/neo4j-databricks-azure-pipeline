%% Mermaid diagram: System + Data Flow Architecture
%% Render using Mermaid-compatible viewers or GH Markdown (via extensions)

flowchart LR
  GH[GitHub Actions] -->|Databricks CLI & SDK| DBX[Azure Databricks]
  DBX -->|Unity Catalog| Silver[(Silver Tables)]
  Silver -->|Graph Transformation| GR[(Graph_Ready Tables)]
  GR -->|Neo4j Loader| NEO4J[Neo4j Aura]
  NEO4J -->|Write-back via Connector/Python| Delta[(Delta Tables)]
  Delta --> Gold[(Gold Tables)]

  subgraph Operations
    GH -.->|Start/Stop Workflows| DBX
    GH -.->|Secrets & OIDC| DBX
    GH -.->|Validation| NEO4J
  end

  classDef store fill:#ff6666,stroke:#8b0000,stroke-width:2px;
  class Silver,Delta,GR,Gold store

  classDef compute fill:#cfe2f3,stroke:#0b5394,stroke-width:2px;
  class GH,DBX,NEO4J compute
